#include "ENetHost.h"

ENetHost::ENetHost() {
    if(enet_initialize() != 0) {
        ErrorHandler::FatalError("Enet failed to initialize!",
                                ErrorHandler::ErrorType::ERROR_GENERIC);
    }
    printf("ENet initialized.\n");
    
    m_address.host = ENET_HOST_ANY;
    m_address.port = DEFAULT_PORT;
    
    m_server = enet_host_create(&m_address, 32, 2, 0, 0);
    
    if(m_server == nullptr) {
        ErrorHandler::FatalError("ENet server could not be created!",
                                ErrorHandler::ErrorType::ERROR_GENERIC);
    }
    
    printf("ENet server created.\n");
    
    
}

ENetHost::~EnetHost() {
    enet_destroy_server(m_server);
    enet_deinitialize();
}
